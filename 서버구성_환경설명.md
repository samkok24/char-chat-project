# AI ìºë¦­í„° ì±— í”„ë¡œì íŠ¸ - ì „ì²´ ì„œë²„ êµ¬ì„± ë° í™˜ê²½

## ğŸ—ï¸ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 1. **ì„œë¹„ìŠ¤ êµ¬ì„± (Docker Compose)**

í”„ë¡œì íŠ¸ëŠ” **4ê°œì˜ ì£¼ìš” ì„œë¹„ìŠ¤**ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì‚¬ìš©ì ë¸Œë¼ìš°ì €                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ :5173                 â”‚ :3001
             â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (React)  â”‚    â”‚  Chat Server       â”‚
â”‚  Port: 5173        â”‚    â”‚  (Socket.IO)       â”‚
â”‚                    â”‚    â”‚  Port: 3001        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ :8000                   â”‚
         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API       â”‚    â”‚  Redis Cache       â”‚
â”‚  (FastAPI)         â”‚    â”‚  Port: 6379        â”‚
â”‚  Port: 8000        â”‚    â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SQLite Database   â”‚
â”‚  /app/data/test.db â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. **ê° ì„œë¹„ìŠ¤ ìƒì„¸ ì„¤ëª…**

#### **A. Frontend (React + Vite)**
- **í¬íŠ¸**: 5173
- **ì»¨í…Œì´ë„ˆëª…**: char_chat_frontend
- **ì´ë¯¸ì§€**: char-chat-frontend-dev
- **ê¸°ìˆ  ìŠ¤íƒ**: 
  - React 18
  - Vite (ë¹Œë“œ ë„êµ¬)
  - pnpm (íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €)
  - Tailwind CSS + shadcn/ui
- **ì—­í• **: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì œê³µ

#### **B. Backend API (FastAPI)**
- **í¬íŠ¸**: 8000
- **ì»¨í…Œì´ë„ˆëª…**: char_chat_backend
- **ì´ë¯¸ì§€**: char-chat-backend-dev
- **ê¸°ìˆ  ìŠ¤íƒ**:
  - Python 3.11
  - FastAPI (ì›¹ í”„ë ˆì„ì›Œí¬)
  - SQLAlchemy (ORM)
  - Pydantic (ë°ì´í„° ê²€ì¦)
  - JWT (ì¸ì¦)
- **ì—­í• **: 
  - REST API ì œê³µ
  - ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
  - AI ì„œë¹„ìŠ¤ ì—°ë™ (Gemini, Claude, OpenAI)
  - ì‚¬ìš©ì ì¸ì¦/ì¸ê°€

#### **C. Chat Server (Node.js + Socket.IO)**
- **í¬íŠ¸**: 3001
- **ì»¨í…Œì´ë„ˆëª…**: char_chat_server
- **ì´ë¯¸ì§€**: char-chat-server-dev
- **ê¸°ìˆ  ìŠ¤íƒ**:
  - Node.js 18 Alpine
  - Socket.IO (ì‹¤ì‹œê°„ í†µì‹ )
  - Redis ì—°ë™
- **ì—­í• **: ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ëŠ¥ ì œê³µ

#### **D. Redis**
- **í¬íŠ¸**: 6379
- **ì»¨í…Œì´ë„ˆëª…**: char_chat_redis
- **ì´ë¯¸ì§€**: redis:7-alpine
- **ì—­í• **: 
  - ì„¸ì…˜ ê´€ë¦¬
  - ìºì‹±
  - ì‹¤ì‹œê°„ ë©”ì‹œì§€ í

### 3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env)**

```env
# í™˜ê²½ ì„¤ì •
ENVIRONMENT=development
DEBUG=true

# ë°ì´í„°ë² ì´ìŠ¤
DATABASE_URL=sqlite:///./data/test.db

# JWT ì¸ì¦
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# AI API í‚¤
GEMINI_API_KEY=your-gemini-api-key-here
CLAUDE_API_KEY=your-claude-api-key-here
OPENAI_API_KEY=your-openai-api-key-here

# í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²° ì„¤ì •
VITE_API_URL=http://localhost:8000
VITE_SOCKET_URL=http://localhost:3001

# ì±„íŒ… ì„œë²„ ì„¤ì •
NODE_ENV=development
PORT=3001
REDIS_URL=redis://localhost:6379
```

### 4. **Docker ë„¤íŠ¸ì›Œí¬**

- **ë„¤íŠ¸ì›Œí¬ëª…**: char_chat_network
- **ë“œë¼ì´ë²„**: bridge
- ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ì´ ë„¤íŠ¸ì›Œí¬ë¡œ ì—°ê²°ë˜ì–´ ì„œë¡œ í†µì‹  ê°€ëŠ¥

### 5. **ë³¼ë¥¨ ë§ˆìš´íŠ¸**

```yaml
backend:
  volumes:
    - ./backend-api/data:/app/data  # SQLite DB íŒŒì¼ ì˜ì†ì„±
```

### 6. **ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸**

```
/auth/*        - ì‚¬ìš©ì ì¸ì¦ (ë¡œê·¸ì¸, íšŒì›ê°€ì…)
/characters/*  - AI ìºë¦­í„° ê´€ë¦¬
/chat/*        - ì±„íŒ… ê¸°ëŠ¥
/stories/*     - AI ìŠ¤í† ë¦¬ ìƒì„±
/docs          - API ë¬¸ì„œ (ê°œë°œ í™˜ê²½ì—ì„œë§Œ)
```

### 7. **í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°**

```
char_chat_project_v2/
â”œâ”€â”€ .env                    # í™˜ê²½ ë³€ìˆ˜
â”œâ”€â”€ docker-compose.dev.yml  # Docker ê°œë°œ í™˜ê²½ ì„¤ì •
â”œâ”€â”€ backend-api/           # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/          # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ core/         # ì„¤ì •, DB, ë³´ì•ˆ
â”‚   â”‚   â”œâ”€â”€ models/       # DB ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ schemas/      # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â””â”€â”€ services/     # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â””â”€â”€ data/            # SQLite DB íŒŒì¼
â”œâ”€â”€ frontend/            # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â””â”€â”€ char-chat-frontend/
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ pages/
â”‚       â”‚   â”œâ”€â”€ contexts/
â”‚       â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ public/
â”œâ”€â”€ chat-server/         # Socket.IO ì„œë²„
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ controllers/
â”‚       â”œâ”€â”€ services/
â”‚       â””â”€â”€ config/
â””â”€â”€ docker/             # í”„ë¡œë•ì…˜ Docker ì„¤ì •
```

### 8. **ë°ì´í„° íë¦„**

1. **ì‚¬ìš©ì ìš”ì²­**: ë¸Œë¼ìš°ì € â†’ Frontend (5173)
2. **API í˜¸ì¶œ**: Frontend â†’ Backend API (8000)
3. **ì‹¤ì‹œê°„ ì±„íŒ…**: Frontend â†” Chat Server (3001) â†” Redis (6379)
4. **AI ì²˜ë¦¬**: Backend â†’ ì™¸ë¶€ AI API (Gemini/Claude/OpenAI)
5. **ë°ì´í„° ì €ì¥**: Backend â†’ SQLite DB

### 9. **ë³´ì•ˆ ì„¤ì •**

- CORS: ëª¨ë“  origin í—ˆìš© (ê°œë°œ í™˜ê²½)
- JWT í† í° ê¸°ë°˜ ì¸ì¦
- í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬ (development/production)
- API í‚¤ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬

### 10. **ì„œë¹„ìŠ¤ ì‹¤í–‰ ë°©ë²•**

#### Docker Compose ì‚¬ìš© (ê¶Œì¥)
```bash
# ì„œë¹„ìŠ¤ ì‹œì‘
docker-compose -f docker-compose.dev.yml up -d

# ë¡œê·¸ í™•ì¸
docker-compose -f docker-compose.dev.yml logs -f

# ì„œë¹„ìŠ¤ ì¤‘ì§€
docker-compose -f docker-compose.dev.yml down
```

#### ê°œë³„ ì‹¤í–‰
```bash
# Backend
cd backend-api
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# Frontend
cd frontend/char-chat-frontend
npm run dev

# Chat Server
cd chat-server
npm start
```

### 11. **ë¬¸ì œ í•´ê²°**

#### ë°±ì—”ë“œ í™˜ê²½ë³€ìˆ˜ ì˜¤ë¥˜
- `.env` íŒŒì¼ì´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìˆëŠ”ì§€ í™•ì¸
- Docker ì´ë¯¸ì§€ ì¬ë¹Œë“œ: `docker-compose -f docker-compose.dev.yml up --build -d`

#### í¬íŠ¸ ì¶©ëŒ
- ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ í¬íŠ¸ë¥¼ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸
- docker-compose.dev.ymlì—ì„œ í¬íŠ¸ ë³€ê²½ ê°€ëŠ¥

ì´ êµ¬ì„±ìœ¼ë¡œ AI ìºë¦­í„°ì™€ ëŒ€í™”í•˜ê³ , ìŠ¤í† ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” í’€ìŠ¤íƒ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™ë©ë‹ˆë‹¤! 